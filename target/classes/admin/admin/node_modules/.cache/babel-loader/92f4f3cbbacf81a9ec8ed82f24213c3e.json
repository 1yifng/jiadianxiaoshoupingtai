{"remainingRequest":"C:\\jiadianxiaoshoupingtai\\src\\main\\resources\\admin\\admin\\node_modules\\thread-loader\\dist\\cjs.js!C:\\jiadianxiaoshoupingtai\\src\\main\\resources\\admin\\admin\\node_modules\\babel-loader\\lib\\index.js!C:\\jiadianxiaoshoupingtai\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\jiadianxiaoshoupingtai\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\jiadianxiaoshoupingtai\\src\\main\\resources\\admin\\admin\\src\\components\\common\\Editor.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\jiadianxiaoshoupingtai\\src\\main\\resources\\admin\\admin\\src\\components\\common\\Editor.vue","mtime":1744987916274},{"path":"C:\\jiadianxiaoshoupingtai\\src\\main\\resources\\admin\\admin\\babel.config.js","mtime":1679988669673},{"path":"C:\\jiadianxiaoshoupingtai\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1743781066581},{"path":"C:\\jiadianxiaoshoupingtai\\src\\main\\resources\\admin\\admin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1743781066601},{"path":"C:\\jiadianxiaoshoupingtai\\src\\main\\resources\\admin\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1743781066696},{"path":"C:\\jiadianxiaoshoupingtai\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1743781066581},{"path":"C:\\jiadianxiaoshoupingtai\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1743781065439}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7Ci8vIOWvvOWFpeWvjOaWh+acrOe8lui+keWZqOebuOWFs+e7hOS7tuWSjOagt+W8jwppbXBvcnQgeyBxdWlsbEVkaXRvciB9IGZyb20gInZ1ZS1xdWlsbC1lZGl0b3IiOwppbXBvcnQgInF1aWxsL2Rpc3QvcXVpbGwuY29yZS5jc3MiOwppbXBvcnQgInF1aWxsL2Rpc3QvcXVpbGwuc25vdy5jc3MiOwppbXBvcnQgInF1aWxsL2Rpc3QvcXVpbGwuYnViYmxlLmNzcyI7CmV4cG9ydCBkZWZhdWx0IHsKICAvLyDnu4Tku7bmjqXmlLbnmoRwcm9wcwogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICAvLyDnvJbovpHlmajlhoXlrrnvvIh2LW1vZGVs57uR5a6a77yJCiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIGFjdGlvbjogewogICAgICAvLyDlm77niYfkuIrkvKDmjqXlj6Pot6/lvoQKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgbWF4U2l6ZTogewogICAgICAvLyDlm77niYflpKflsI/pmZDliLbvvIjpu5jorqQ0TULvvIkKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA0MDAwCiAgICB9CiAgfSwKICAvLyDms6jlhozlrZDnu4Tku7YKICBjb21wb25lbnRzOiB7CiAgICBxdWlsbEVkaXRvcjogcXVpbGxFZGl0b3IKICB9LAogIC8vIOe7hOS7tuaVsOaNrgogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb250ZW50OiAiIiwKICAgICAgLy8g57yW6L6R5Zmo5YaF5a65CiAgICAgIHF1aWxsVXBkYXRlSW1nOiBmYWxzZSwKICAgICAgLy8g5Zu+54mH5LiK5Lyg54q25oCB5qCH6K6wCiAgICAgIGVkaXRvck9wdGlvbjogewogICAgICAgIC8vIOe8lui+keWZqOmFjee9rgogICAgICAgIHBsYWNlaG9sZGVyOiAiIiwKICAgICAgICAvLyDljaDkvY3mlofmnKwKICAgICAgICB0aGVtZTogInNub3ciLAogICAgICAgIC8vIOS4u+mimOagt+W8jwogICAgICAgIG1vZHVsZXM6IHsKICAgICAgICAgIHRvb2xiYXI6IGZhbHNlIC8vIOemgeeUqOW3peWFt+agj++8iOiuvuS4umZhbHNl6KGo56S65LiN5pi+56S65bel5YW35qCP77yJCiAgICAgICAgfQogICAgICB9LAogICAgICBoZWFkZXI6IHsKICAgICAgICAvLyDkuIrkvKDor7fmsYLlpLQKICAgICAgICAnVG9rZW4nOiB0aGlzLiRzdG9yYWdlLmdldCgiVG9rZW4iKSAvLyDku47mnKzlnLDlrZjlgqjojrflj5ZUb2tlbgogICAgICB9CiAgICB9OwogIH0sCiAgLy8g6K6h566X5bGe5oCnCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOaehOmAoOWujOaVtOeahOWbvueJh+S4iuS8oFVSTAogICAgZ2V0QWN0aW9uVXJsOiBmdW5jdGlvbiBnZXRBY3Rpb25VcmwoKSB7CiAgICAgIHRoaXMuc2V0Q29udGVudCh0aGlzLnZhbHVlKTsgLy8g5ZCM5q2l5YaF5a65CiAgICAgIHJldHVybiAiLyIuY29uY2F0KHRoaXMuJGJhc2UubmFtZSwgIi8iKSArIHRoaXMuYWN0aW9uOyAvLyDmi7zmjqXln7rnoYDot6/lvoTlkozmjqXlj6Pot6/lvoQKICAgIH0KICB9LAogIC8vIOaWueazlQogIG1ldGhvZHM6IHsKICAgIC8vIOiuvue9rue8lui+keWZqOWGheWuuQogICAgc2V0Q29udGVudDogZnVuY3Rpb24gc2V0Q29udGVudCh2YWx1ZSkgewogICAgICB0aGlzLmNvbnRlbnQgPSB2YWx1ZTsKICAgIH0sCiAgICAvLyDnvJbovpHlmajlpLHljrvnhKbngrnkuovku7bvvIjnqbrlrp7njrDvvIzlj6/mjInpnIDmianlsZXvvIkKICAgIG9uRWRpdG9yQmx1cjogZnVuY3Rpb24gb25FZGl0b3JCbHVyKCkge30sCiAgICAvLyDnvJbovpHlmajojrflj5bnhKbngrnkuovku7bvvIjnqbrlrp7njrDvvIzlj6/mjInpnIDmianlsZXvvIkKICAgIG9uRWRpdG9yRm9jdXM6IGZ1bmN0aW9uIG9uRWRpdG9yRm9jdXMoKSB7fSwKICAgIC8vIOe8lui+keWZqOWGheWuueWPmOWMluS6i+S7tgogICAgb25FZGl0b3JDaGFuZ2U6IGZ1bmN0aW9uIG9uRWRpdG9yQ2hhbmdlKCkgewogICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHRoaXMuY29udGVudCk7IC8vIOinpuWPkXYtbW9kZWzmm7TmlrAKICAgIH0sCiAgICAvLyDlm77niYfkuIrkvKDliY3nmoTlpITnkIYKICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKCkgewogICAgICB0aGlzLnF1aWxsVXBkYXRlSW1nID0gdHJ1ZTsgLy8g5qCH6K6w5LiK5Lyg5byA5aeLCiAgICB9LAogICAgLy8g5Zu+54mH5LiK5Lyg5oiQ5Yqf5Zue6LCDCiAgICB1cGxvYWRTdWNjZXNzOiBmdW5jdGlvbiB1cGxvYWRTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICB2YXIgcXVpbGwgPSB0aGlzLiRyZWZzLm15UXVpbGxFZGl0b3IucXVpbGw7IC8vIOiOt+WPlue8lui+keWZqOWunuS+iwogICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgICAvLyDkuIrkvKDmiJDlip8KICAgICAgICB2YXIgbGVuZ3RoID0gcXVpbGwuZ2V0U2VsZWN0aW9uKCkuaW5kZXg7IC8vIOiOt+WPluW9k+WJjeWFieagh+S9jee9rgogICAgICAgIC8vIOWcqOWFieagh+WkhOaPkuWFpeWbvueJhwogICAgICAgIHF1aWxsLmluc2VydEVtYmVkKGxlbmd0aCwgImltYWdlIiwgdGhpcy4kYmFzZS51cmwgKyAidXBsb2FkLyIgKyByZXMuZmlsZSk7CiAgICAgICAgcXVpbGwuc2V0U2VsZWN0aW9uKGxlbmd0aCArIDEpOyAvLyDnp7vliqjlhYnmoIfliLDlm77niYflkI4KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlm77niYfmj5LlhaXlpLHotKUiKTsgLy8g6ZSZ6K+v5o+Q56S6CiAgICAgIH0KICAgICAgdGhpcy5xdWlsbFVwZGF0ZUltZyA9IGZhbHNlOyAvLyDmoIforrDkuIrkvKDnu5PmnZ8KICAgIH0sCiAgICAvLyDlm77niYfkuIrkvKDlpLHotKXlm57osIMKICAgIHVwbG9hZEVycm9yOiBmdW5jdGlvbiB1cGxvYWRFcnJvcigpIHsKICAgICAgdGhpcy5xdWlsbFVwZGF0ZUltZyA9IGZhbHNlOyAvLyDmoIforrDkuIrkvKDnu5PmnZ8KICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5Zu+54mH5o+S5YWl5aSx6LSlIik7IC8vIOmUmeivr+aPkOekugogICAgfQogIH0KfTs="},{"version":3,"names":["quillEditor","props","value","type","String","action","maxSize","Number","default","components","data","content","quillUpdateImg","editorOption","placeholder","theme","modules","toolbar","header","$storage","get","computed","getActionUrl","setContent","concat","$base","name","methods","onEditorBlur","onEditorFocus","onEditorChange","$emit","beforeUpload","uploadSuccess","res","file","quill","$refs","myQuillEditor","code","length","getSelection","index","insertEmbed","url","setSelection","$message","error","uploadError"],"sources":["src/components/common/Editor.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- 图片上传组件（隐藏） -->\r\n    <!-- 用于富文本编辑器中的图片上传功能 -->\r\n<!--    name=\"file\" 上传文件的参数名-->\r\n<!--    :headers=\"header\" 请求头（含Token）-->\r\n<!--    :show-file-list=\"false\" 不显示文件列表-->\r\n<!--    :on-success=\"uploadSuccess\" 上传成功回调-->\r\n<!--    :on-error=\"uploadError\"  上传失败回调-->\r\n<!--    :before-upload=\"beforeUpload\" 上传前处理-->\r\n    <el-upload\r\n        class=\"avatar-uploader\"\r\n        :action=\"getActionUrl\"\r\n    name=\"file\"\r\n    :headers=\"header\"\r\n    :show-file-list=\"false\"\r\n    :on-success=\"uploadSuccess\"\r\n    :on-error=\"uploadError\"\r\n    :before-upload=\"beforeUpload\"\r\n    ></el-upload>\r\n\r\n    <!-- 富文本编辑器主体 -->\r\n<!--    v-model=\"content\"       // 双向绑定编辑器内容-->\r\n<!--    ref=\"myQuillEditor\"     // 获取编辑器实例的引用-->\r\n<!--    :options=\"editorOption\" // 编辑器配置-->\r\n<!--    @blur=\"onEditorBlur($event)\"   // 失去焦点事件-->\r\n<!--    @focus=\"onEditorFocus($event)\" // 获取焦点事件-->\r\n<!--    @change=\"onEditorChange($event)\" // 内容变化事件-->\r\n    <quill-editor\r\n        class=\"editor\"\r\n        v-model=\"content\"\r\n    ref=\"myQuillEditor\"\r\n    :options=\"editorOption\"\r\n    @blur=\"onEditorBlur($event)\"\r\n    @focus=\"onEditorFocus($event)\"\r\n    @change=\"onEditorChange($event)\"\r\n    ></quill-editor>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 导入富文本编辑器相关组件和样式\r\nimport { quillEditor } from \"vue-quill-editor\";\r\nimport \"quill/dist/quill.core.css\";\r\nimport \"quill/dist/quill.snow.css\";\r\nimport \"quill/dist/quill.bubble.css\";\r\n\r\nexport default {\r\n  // 组件接收的props\r\n  props: {\r\n    value: {  // 编辑器内容（v-model绑定）\r\n      type: String\r\n    },\r\n    action: { // 图片上传接口路径\r\n      type: String\r\n    },\r\n    maxSize: { // 图片大小限制（默认4MB）\r\n      type: Number,\r\n      default: 4000\r\n    }\r\n  },\r\n\r\n  // 注册子组件\r\n  components: {\r\n    quillEditor\r\n  },\r\n\r\n  // 组件数据\r\n  data() {\r\n    return {\r\n      content: \"\", // 编辑器内容\r\n      quillUpdateImg: false, // 图片上传状态标记\r\n      editorOption: { // 编辑器配置\r\n        placeholder: \"\", // 占位文本\r\n        theme: \"snow\",  // 主题样式\r\n        modules: {\r\n          toolbar: false // 禁用工具栏（设为false表示不显示工具栏）\r\n        }\r\n      },\r\n      header: { // 上传请求头\r\n        'Token': this.$storage.get(\"Token\") // 从本地存储获取Token\r\n      }\r\n    };\r\n  },\r\n\r\n  // 计算属性\r\n  computed: {\r\n    // 构造完整的图片上传URL\r\n    getActionUrl: function() {\r\n      this.setContent(this.value); // 同步内容\r\n      return `/${this.$base.name}/` + this.action; // 拼接基础路径和接口路径\r\n    }\r\n  },\r\n\r\n  // 方法\r\n  methods: {\r\n    // 设置编辑器内容\r\n    setContent(value) {\r\n      this.content = value;\r\n    },\r\n\r\n    // 编辑器失去焦点事件（空实现，可按需扩展）\r\n    onEditorBlur() {},\r\n\r\n    // 编辑器获取焦点事件（空实现，可按需扩展）\r\n    onEditorFocus() {},\r\n\r\n    // 编辑器内容变化事件\r\n    onEditorChange() {\r\n      this.$emit(\"input\", this.content); // 触发v-model更新\r\n    },\r\n\r\n    // 图片上传前的处理\r\n    beforeUpload() {\r\n      this.quillUpdateImg = true; // 标记上传开始\r\n    },\r\n\r\n    // 图片上传成功回调\r\n    uploadSuccess(res, file) {\r\n      let quill = this.$refs.myQuillEditor.quill; // 获取编辑器实例\r\n      if (res.code === 0) { // 上传成功\r\n        let length = quill.getSelection().index; // 获取当前光标位置\r\n        // 在光标处插入图片\r\n        quill.insertEmbed(length, \"image\", this.$base.url + \"upload/\" + res.file);\r\n        quill.setSelection(length + 1); // 移动光标到图片后\r\n      } else {\r\n        this.$message.error(\"图片插入失败\"); // 错误提示\r\n      }\r\n      this.quillUpdateImg = false; // 标记上传结束\r\n    },\r\n\r\n    // 图片上传失败回调\r\n    uploadError() {\r\n      this.quillUpdateImg = false; // 标记上传结束\r\n      this.$message.error(\"图片插入失败\"); // 错误提示\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* 编辑器基础样式 */\r\n.editor {\r\n  line-height: normal !important; /* 重置行高 */\r\n}\r\n\r\n/* 设置编辑器容器高度 */\r\n.ql-container {\r\n  height: 400px; /* 固定高度，可调整 */\r\n}\r\n</style>"],"mappings":";;AAyCA;AACA,SAAAA,WAAA;AACA;AACA;AACA;AAEA;EACA;EACAC,KAAA;IACAC,KAAA;MAAA;MACAC,IAAA,EAAAC;IACA;IACAC,MAAA;MAAA;MACAF,IAAA,EAAAC;IACA;IACAE,OAAA;MAAA;MACAH,IAAA,EAAAI,MAAA;MACAC,OAAA;IACA;EACA;EAEA;EACAC,UAAA;IACAT,WAAA,EAAAA;EACA;EAEA;EACAU,IAAA,WAAAA,KAAA;IACA;MACAC,OAAA;MAAA;MACAC,cAAA;MAAA;MACAC,YAAA;QAAA;QACAC,WAAA;QAAA;QACAC,KAAA;QAAA;QACAC,OAAA;UACAC,OAAA;QACA;MACA;MACAC,MAAA;QAAA;QACA,cAAAC,QAAA,CAAAC,GAAA;MACA;IACA;EACA;EAEA;EACAC,QAAA;IACA;IACAC,YAAA,WAAAA,aAAA;MACA,KAAAC,UAAA,MAAArB,KAAA;MACA,WAAAsB,MAAA,MAAAC,KAAA,CAAAC,IAAA,cAAArB,MAAA;IACA;EACA;EAEA;EACAsB,OAAA;IACA;IACAJ,UAAA,WAAAA,WAAArB,KAAA;MACA,KAAAS,OAAA,GAAAT,KAAA;IACA;IAEA;IACA0B,YAAA,WAAAA,aAAA;IAEA;IACAC,aAAA,WAAAA,cAAA;IAEA;IACAC,cAAA,WAAAA,eAAA;MACA,KAAAC,KAAA,eAAApB,OAAA;IACA;IAEA;IACAqB,YAAA,WAAAA,aAAA;MACA,KAAApB,cAAA;IACA;IAEA;IACAqB,aAAA,WAAAA,cAAAC,GAAA,EAAAC,IAAA;MACA,IAAAC,KAAA,QAAAC,KAAA,CAAAC,aAAA,CAAAF,KAAA;MACA,IAAAF,GAAA,CAAAK,IAAA;QAAA;QACA,IAAAC,MAAA,GAAAJ,KAAA,CAAAK,YAAA,GAAAC,KAAA;QACA;QACAN,KAAA,CAAAO,WAAA,CAAAH,MAAA,gBAAAf,KAAA,CAAAmB,GAAA,eAAAV,GAAA,CAAAC,IAAA;QACAC,KAAA,CAAAS,YAAA,CAAAL,MAAA;MACA;QACA,KAAAM,QAAA,CAAAC,KAAA;MACA;MACA,KAAAnC,cAAA;IACA;IAEA;IACAoC,WAAA,WAAAA,YAAA;MACA,KAAApC,cAAA;MACA,KAAAkC,QAAA,CAAAC,KAAA;IACA;EACA;AACA","ignoreList":[]}]}